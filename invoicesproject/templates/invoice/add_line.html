<!-- head para PC -->
{% extends "invoice/base_invoice.html" %}

{% load  static %}

{% block content %}

{% include "includes/header.html" %}

<div class="grid-container">
    <div class="grid-x grid-margin-x" style="margin-top: 1em;">
        <!-- primer bloque pantalla -->
        <div class="cell small-12 large-12">
            <!-- inicio bloque cabecera de factura -->
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 large-12">
                    <h2>Factura</h2>
                </div>
                <table class="hover">
                    <thead>
                        <tr>
                            <th width="150">Cliente</th>
                            <th width="50">Código de factura</th>
                            <th width="50">Fecha</th>
                            <th width="50">Importe bruto</th>
                        </tr>
                    </thead>
                    <tbody>               
                        <tr>
                            <td>{{ invoice.invoice__client__alias }}</td>
                            <td><a href="{% url 'invoice_app:invoice-detail' invoice.invoice__id %}">{{ invoice.invoice__code }}</a></td>
                            <td>{{ invoice.invoice__date }}</td>
                            <td>{{ invoice.total_price }}</td>                          
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- inicio bloque líneas de factura -->
            <div class="grid-x grid-margin-x">
                <div class="cell small-2 large-2" style="margin-right:0px;">
                    <h2>Desglose</h2>
                </div>                
                <div class="cell small-9 large-9">
                </div>
                <table class="hover">
                    <thead>
                        <tr>
                            <th width="50">Importe bruto</th>
                            <th width="50">Importe neto</th>
                            <th width="50">IRPF</th>
                            <th width="50">Importe IRPF</th>
                            <th width="50">IVA</th>
                            <th width="50">Importe IVA</th>
                            <th width="40"></th>
                            <th width="40"></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for line in invoice_lines  %}                    
                        <tr>
                            <td>{{ line.amount }}</td>
                            <td>{{ line.net_amount }}</td>
                            <td>{{ line.irpf }}</td>
                            <td>{{ line.irpf_amount }}</td>
                            <td>{{ line.iva }}</td>
                            <td>{{ line.iva_amount }}</td>     
                        </tr>                                  
                        {% endfor %}
                        <tr>
                            <form method="POST" enctype="multipart/form-data">{% csrf_token %}    
                                <td>{{ form.amount }}</td>
                                <td>{{ form.net_amount }}</td>
                                <td>{{ form.irpf }}</td>
                                <td>{{ form.irpf_amount }}</td>
                                <td>{{ form.iva }}</td>
                                <td>{{ form.iva_amount }}</td>  
                                <td>
                                    <button type="submit" class="success button">Guardar</button>
                                </td>
                                <td><a href="{% url 'invoice_app:invoice-detail' invoice.invoice__id %}"><img src="{% static 'img/eliminar.png' %}" alt="Ver" style="width:35px;height:35px;"></img></a></td>                                           
                            </form>                  
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- FIN bloque de líneas de factura -->
        </div>
        <!-- FIN primer bloque pantalla  -->    
    </div>
</div>
{% include "includes/footer.html" %}

{% endblock content %}